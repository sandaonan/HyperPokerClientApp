
# HyperPoker 產品規格書 (Product Specification)

## 1. 系統概述
HyperPoker 是一個針對德州撲克玩家設計的移動端優先 (Mobile-First) Web 應用程式。提供玩家管理俱樂部會籍、報名賽事、查看戰績以及個人身份驗證功能。

## 2. 會員系統 (User System)

### 2.1 身份驗證狀態 (Profile & Identity)
- **一般資料**: 暱稱、手機號碼。修改不影響會籍狀態。
- **敏感資料 (Sensitive Data)**: 真實姓名、身分證字號、生日、證件照片 (KYC)。
- **邏輯規則**:
    1. 用戶註冊時不需要立即填寫敏感資料。
    2. **觸發驗證重置**: 若用戶修改「敏感資料」，系統將強制將該用戶在**所有**已加入俱樂部的狀態改為 `pending` (需驗證)。
    3. 用戶需至俱樂部櫃檯進行真人核對，由櫃檯人員(後台)將狀態改回 `active` (本系統目前以 Mock API 模擬)。

### 2.2 手機驗證
- 修改手機號碼需經過 OTP 驗證流程 (模擬碼: 1234)。

## 3. 俱樂部系統 (Club System)

### 3.1 會籍狀態 (Membership Status)
俱樂部與用戶的關聯存儲於 `Wallet` 物件中。狀態分為：

| 狀態 | 代碼 | 描述 | 行為限制 |
| :--- | :--- | :--- | :--- |
| **正常會員** | `active` | 已通過驗證，功能正常。 | 可預約、可報名、可檢視詳情。 |
| **需驗證** | `pending` | 資料缺漏或曾修改敏感資料。 | **不可報名/預約**。進入俱樂部頁面會顯示警告。點擊警告跳出提示 Modal。 |
| **審核中** | `applying` | 剛申請加入，等待管理員批准。 | **不可報名/預約**。顯示「審核中」標籤。 |
| **停權** | `banned` | 被俱樂部封鎖。 | 無法進行任何操作。 |

### 3.2 加入流程
1. **新用戶註冊**:
   - **注意**: 未來將整合第三方 Solution 進行註冊。
   - **目前測試機制**: 為了便於 App 功能測試，系統目前會在註冊時「自動」將用戶加入預設的俱樂部 (如: Hyper 俱樂部)，狀態預設為 `pending`。
2. **申請新俱樂部**:
    - 用戶點擊「申請加入」。
    - 狀態變為 `applying`。
    - **模擬邏輯**: 系統會在 8 秒後自動通過審核，將狀態轉為 `active` (若資料完整) 或維持 `pending` (若資料不全)。

### 3.3 會員專屬頁面 (Membership Card)
在個人檔案中點擊已加入的俱樂部，可開啟詳細會員卡片：
- **數位會員卡**: 顯示會員等級、專屬條碼 (供櫃檯掃描)。
- **里程進度**: 顯示目前累積積分/Buy-in 與下一級別的門檻進度。
- **財務資訊**: 顯示該俱樂部的儲值金餘額、歷史總獎金。
- **反饋**: 提供跳轉至外部問卷/LINE 的連結。

## 4. 賽事系統 (Tournament System)

### 4.1 報名流程 (Registration Flow)
賽事詳情頁面根據用戶狀態顯示不同按鈕：

1. **未報名**:
    - **前提**: 賽事狀態必須為 `OPEN`。
    - **額滿處理**: 若人數已達上限，按鈕顯示「**加入候補 (Join Waitlist)**」。點擊後依然可以預約，但狀態標記為候補。
    - 顯示按鈕: **「預約」** 或 **「加入候補」**。
    - 行為: 點擊後不扣款，僅佔位。Modal **不關閉**，狀態更新為已預約。
2. **已預約 (Reserved/Waitlisted)**:
    - 顯示按鈕 A: **「取消預約」** (點擊後取消席位/候補)。
    - 顯示按鈕 B: **「確認報名」** (Buy-in)。
    - 行為: 檢查俱樂部錢包餘額。若餘額充足，扣除 (Buy-in + Fee) 並將狀態改為 `paid`。若餘額不足，按鈕 Disable。
3. **已付款 (Paid)**:
    - **App 端不可取消**: 一旦完成付款報名，用戶**無法**透過 App 自行取消或退款。
    - 顯示提示: 顯示「已完成報名，如需異動請洽櫃檯」等提示字樣。

### 4.2 賽事列表顯示
- **卡片資訊**: 需清晰顯示起始籌碼 (Starting Chips) 與目前盲注結構。
- **參加人數**:
    - 顯示格式為 `目前人數 / 上限`。
    - **超額顯示**: 若目前人數超過上限 (例如包含候補)，該文字需顯示為**紅色**以示區別。
- **狀態標籤**:
    - `OPEN`: 開放報名 (包含延遲註冊期間)。
    - `CLOSED`: 報名已完全截止 (無法預約)。
    - **名稱**: 賽事名稱不應包含狀態文字 (如"已額滿")，純粹顯示名稱。

### 4.3 賽事詳情與功能
- **賽事時鐘**: 若賽事進行中，提供連結開啟即時賽事時鐘 (Tournament Clock)。
- **名單顯示**: 預約名單需區分 **「正選名單」** (名額內) 與 **「候補名單」** (名額外)，並標示候補順位。

## 5. UI/UX 規範

### 5.1 設計風格
- **色調**: Dark Mode (Slate-900 背景)。
- **主色**: Amber/Gold (賭場奢華感)。
- **元件**: 使用卡片式設計，強調層級。

### 5.2 互動反饋 (Alerts)
- **全面替換原生 Alert**: 使用客製化的 `AlertDialog` 元件。
- **類型**:
    - `alert`: 單純訊息提示。
    - `confirm`: 雙按鈕確認 (如：取消預約確認)。
    - `prompt`: 輸入框提示 (如：手機驗證碼)。

## 6. 資料結構摘要 (TypeScript Interfaces)

- **User**: `id`, `isProfileComplete`, `kycUploaded`, `mobileVerified`...
- **Wallet**: `status` (active/pending/applying/banned), `balance`, `points`.
- **Tournament**: `buyIn`, `fee`, `structure`, `lateRegLevel`, `clockUrl`.
- **Club**: `feedbackUrl`...
- **Registration**: `status` (reserved/paid/cancelled).
